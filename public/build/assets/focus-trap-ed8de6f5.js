import{t as V,f as z,a as D,i as C}from"./tabbable-5e3a216d.js";/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function G(o,n){var c=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);n&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(o,u).enumerable})),c.push.apply(c,r)}return c}function x(o){for(var n=1;n<arguments.length;n++){var c=arguments[n]!=null?arguments[n]:{};n%2?G(Object(c),!0).forEach(function(r){J(o,r,c[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(c)):G(Object(c)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(c,r))})}return o}function J(o,n,c){return n in o?Object.defineProperty(o,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[n]=c,o}var B=function(){var o=[];return{activateTrap:function(c){if(o.length>0){var r=o[o.length-1];r!==c&&r.pause()}var u=o.indexOf(c);u===-1||o.splice(u,1),o.push(c)},deactivateTrap:function(c){var r=o.indexOf(c);r!==-1&&o.splice(r,1),o.length>0&&o[o.length-1].unpause()}}}(),M=function(n){return n.tagName&&n.tagName.toLowerCase()==="input"&&typeof n.select=="function"},U=function(n){return n.key==="Escape"||n.key==="Esc"||n.keyCode===27},W=function(n){return n.key==="Tab"||n.keyCode===9},K=function(n){return setTimeout(n,0)},q=function(n,c){var r=-1;return n.every(function(u,a){return c(u)?(r=a,!1):!0}),r},w=function(n){for(var c=arguments.length,r=new Array(c>1?c-1:0),u=1;u<c;u++)r[u-1]=arguments[u];return typeof n=="function"?n.apply(void 0,r):n},k=function(n){return n.target.shadowRoot&&typeof n.composedPath=="function"?n.composedPath()[0]:n.target},Z=function(n,c){var r=(c==null?void 0:c.document)||document,u=x({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},c),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},v,h=function(e,t,i){return e&&e[t]!==void 0?e[t]:u[i||t]},g=function(e){return a.containerGroups.findIndex(function(t){var i=t.container,l=t.tabbableNodes;return i.contains(e)||l.find(function(s){return s===e})})},m=function(e){var t=u[e];if(typeof t=="function"){for(var i=arguments.length,l=new Array(i>1?i-1:0),s=1;s<i;s++)l[s-1]=arguments[s];t=t.apply(void 0,l)}if(t===!0&&(t=void 0),!t){if(t===void 0||t===!1)return t;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var b=t;if(typeof t=="string"&&(b=r.querySelector(t),!b))throw new Error("`".concat(e,"` as selector refers to no known node"));return b},N=function(){var e=m("initialFocus");if(e===!1)return!1;if(e===void 0)if(g(r.activeElement)>=0)e=r.activeElement;else{var t=a.tabbableGroups[0],i=t&&t.firstTabbableNode;e=i||m("fallbackFocus")}if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},F=function(){if(a.containerGroups=a.containers.map(function(e){var t=V(e,u.tabbableOptions),i=z(e,u.tabbableOptions);return{container:e,tabbableNodes:t,focusableNodes:i,firstTabbableNode:t.length>0?t[0]:null,lastTabbableNode:t.length>0?t[t.length-1]:null,nextTabbableNode:function(s){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,d=i.findIndex(function(p){return p===s});if(!(d<0))return b?i.slice(d+1).find(function(p){return D(p,u.tabbableOptions)}):i.slice(0,d).reverse().find(function(p){return D(p,u.tabbableOptions)})}}}),a.tabbableGroups=a.containerGroups.filter(function(e){return e.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!m("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},y=function f(e){if(e!==!1&&e!==r.activeElement){if(!e||!e.focus){f(N());return}e.focus({preventScroll:!!u.preventScroll}),a.mostRecentlyFocusedNode=e,M(e)&&e.select()}},A=function(e){var t=m("setReturnFocus",e);return t||(t===!1?!1:e)},E=function(e){var t=k(e);if(!(g(t)>=0)){if(w(u.clickOutsideDeactivates,e)){v.deactivate({returnFocus:u.returnFocusOnDeactivate&&!C(t,u.tabbableOptions)});return}w(u.allowOutsideClick,e)||e.preventDefault()}},L=function(e){var t=k(e),i=g(t)>=0;i||t instanceof Document?i&&(a.mostRecentlyFocusedNode=t):(e.stopImmediatePropagation(),y(a.mostRecentlyFocusedNode||N()))},H=function(e){var t=k(e);F();var i=null;if(a.tabbableGroups.length>0){var l=g(t),s=l>=0?a.containerGroups[l]:void 0;if(l<0)e.shiftKey?i=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:i=a.tabbableGroups[0].firstTabbableNode;else if(e.shiftKey){var b=q(a.tabbableGroups,function(O){var P=O.firstTabbableNode;return t===P});if(b<0&&(s.container===t||C(t,u.tabbableOptions)&&!D(t,u.tabbableOptions)&&!s.nextTabbableNode(t,!1))&&(b=l),b>=0){var d=b===0?a.tabbableGroups.length-1:b-1,p=a.tabbableGroups[d];i=p.lastTabbableNode}}else{var T=q(a.tabbableGroups,function(O){var P=O.lastTabbableNode;return t===P});if(T<0&&(s.container===t||C(t,u.tabbableOptions)&&!D(t,u.tabbableOptions)&&!s.nextTabbableNode(t))&&(T=l),T>=0){var Y=T===a.tabbableGroups.length-1?0:T+1,Q=a.tabbableGroups[Y];i=Q.firstTabbableNode}}}else i=m("fallbackFocus");i&&(e.preventDefault(),y(i))},R=function(e){if(U(e)&&w(u.escapeDeactivates,e)!==!1){e.preventDefault(),v.deactivate();return}if(W(e)){H(e);return}},I=function(e){var t=k(e);g(t)>=0||w(u.clickOutsideDeactivates,e)||w(u.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},S=function(){if(a.active)return B.activateTrap(v),a.delayInitialFocusTimer=u.delayInitialFocus?K(function(){y(N())}):y(N()),r.addEventListener("focusin",L,!0),r.addEventListener("mousedown",E,{capture:!0,passive:!1}),r.addEventListener("touchstart",E,{capture:!0,passive:!1}),r.addEventListener("click",I,{capture:!0,passive:!1}),r.addEventListener("keydown",R,{capture:!0,passive:!1}),v},j=function(){if(a.active)return r.removeEventListener("focusin",L,!0),r.removeEventListener("mousedown",E,!0),r.removeEventListener("touchstart",E,!0),r.removeEventListener("click",I,!0),r.removeEventListener("keydown",R,!0),v};return v={get active(){return a.active},get paused(){return a.paused},activate:function(e){if(a.active)return this;var t=h(e,"onActivate"),i=h(e,"onPostActivate"),l=h(e,"checkCanFocusTrap");l||F(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=r.activeElement,t&&t();var s=function(){l&&F(),S(),i&&i()};return l?(l(a.containers.concat()).then(s,s),this):(s(),this)},deactivate:function(e){if(!a.active)return this;var t=x({onDeactivate:u.onDeactivate,onPostDeactivate:u.onPostDeactivate,checkCanReturnFocus:u.checkCanReturnFocus},e);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,j(),a.active=!1,a.paused=!1,B.deactivateTrap(v);var i=h(t,"onDeactivate"),l=h(t,"onPostDeactivate"),s=h(t,"checkCanReturnFocus"),b=h(t,"returnFocus","returnFocusOnDeactivate");i&&i();var d=function(){K(function(){b&&y(A(a.nodeFocusedBeforeActivation)),l&&l()})};return b&&s?(s(A(a.nodeFocusedBeforeActivation)).then(d,d),this):(d(),this)},pause:function(){return a.paused||!a.active?this:(a.paused=!0,j(),this)},unpause:function(){return!a.paused||!a.active?this:(a.paused=!1,F(),S(),this)},updateContainerElements:function(e){var t=[].concat(e).filter(Boolean);return a.containers=t.map(function(i){return typeof i=="string"?r.querySelector(i):i}),a.active&&F(),this}},v.updateContainerElements(n),v};export{Z as c};
