import{c as b}from"./focus-trap-ed8de6f5.js";import{i as x,f as y}from"./tabbable-5e3a216d.js";function E(r){let i,n;window.addEventListener("focusin",()=>{i=n,n=document.activeElement}),r.magic("focus",s=>{let u=s;return{__noscroll:!1,__wrapAround:!1,within(t){return u=t,this},withoutScrolling(){return this.__noscroll=!0,this},noscroll(){return this.__noscroll=!0,this},withWrapAround(){return this.__wrapAround=!0,this},wrap(){return this.withWrapAround()},focusable(t){return x(t)},previouslyFocused(){return i},lastFocused(){return i},focused(){return n},focusables(){return Array.isArray(u)?u:y(u,{displayCheck:"none"})},all(){return this.focusables()},isFirst(t){let e=this.all();return e[0]&&e[0].isSameNode(t)},isLast(t){let e=this.all();return e.length&&e.slice(-1)[0].isSameNode(t)},getFirst(){return this.all()[0]},getLast(){return this.all().slice(-1)[0]},getNext(){let t=this.all(),e=document.activeElement;if(t.indexOf(e)!==-1)return this.__wrapAround&&t.indexOf(e)===t.length-1?t[0]:t[t.indexOf(e)+1]},getPrevious(){let t=this.all(),e=document.activeElement;if(t.indexOf(e)!==-1)return this.__wrapAround&&t.indexOf(e)===0?t.slice(-1)[0]:t[t.indexOf(e)-1]},first(){this.focus(this.getFirst())},last(){this.focus(this.getLast())},next(){this.focus(this.getNext())},previous(){this.focus(this.getPrevious())},prev(){return this.previous()},focus(t){t&&setTimeout(()=>{t.hasAttribute("tabindex")||t.setAttribute("tabindex","0"),t.focus({preventScroll:this._noscroll})})}}}),r.directive("trap",r.skipDuringClone((s,{expression:u,modifiers:t},{effect:e,evaluateLater:w,cleanup:v})=>{let _=w(u),o=!1,d={escapeDeactivates:!1,allowOutsideClick:!0,fallbackFocus:()=>s},f=s.querySelector("[autofocus]");f&&(d.initialFocus=f);let h=b(s,d),c=()=>{},a=()=>{};const m=()=>{c(),c=()=>{},a(),a=()=>{},h.deactivate({returnFocus:!t.includes("noreturn")})};e(()=>_(l=>{o!==l&&(l&&!o&&setTimeout(()=>{t.includes("inert")&&(c=p(s)),t.includes("noscroll")&&(a=F()),h.activate()}),!l&&o&&m(),o=!!l)})),v(m)},(s,{expression:u,modifiers:t},{evaluate:e})=>{t.includes("inert")&&e(u)&&p(s)}))}function p(r){let i=[];return g(r,n=>{let s=n.hasAttribute("aria-hidden");n.setAttribute("aria-hidden","true"),i.push(()=>s||n.removeAttribute("aria-hidden"))}),()=>{for(;i.length;)i.pop()()}}function g(r,i){r.isSameNode(document.body)||!r.parentNode||Array.from(r.parentNode.children).forEach(n=>{n.isSameNode(r)?g(r.parentNode,i):i(n)})}function F(){let r=document.documentElement.style.overflow,i=document.documentElement.style.paddingRight,n=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${n}px`,()=>{document.documentElement.style.overflow=r,document.documentElement.style.paddingRight=i}}var N=E;export{N as m};
